<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="517px" preserveAspectRatio="none" style="width:959px;height:517px;" version="1.1" viewBox="0 0 959 517" width="959px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rm60vg0gyivb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="86.4883" y2="429.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="167" x2="167" y1="86.4883" y2="429.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="323" x2="323" y1="86.4883" y2="429.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="565" x2="565" y1="86.4883" y2="429.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="83.5352">user</text><ellipse cx="26" cy="13" fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,21 L26,48 M13,29 L39,29 M26,48 L13,63 M26,48 L39,63 " fill="none" filter="url(#f1rm60vg0gyivb)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="442.0605">user</text><ellipse cx="26" cy="455.0137" fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,463.0137 L26,490.0137 M13,471.0137 L39,471.0137 M26,490.0137 L13,505.0137 M26,490.0137 L39,505.0137 " fill="none" filter="url(#f1rm60vg0gyivb)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="133" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="140" y="71.5352">ChainA</text><rect fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="133" y="428.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="140" y="449.0605">ChainA</text><rect fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="289" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="296" y="71.5352">Relayer</text><rect fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="289" y="428.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="296" y="449.0605">Relayer</text><rect fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="532" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="539" y="71.5352">ChainB</text><rect fill="#FEFECE" filter="url(#f1rm60vg0gyivb)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="532" y="428.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="539" y="449.0605">ChainB</text><polygon fill="#A80036" points="155,129.1094,165,133.1094,155,137.1094,159,133.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26" x2="161" y1="133.1094" y2="133.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="33" y="113.0566">发送跨链交易</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="33" y="128.3672">IBCPacketCreateTx</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="167" x2="209" y1="177.7305" y2="177.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209" x2="209" y1="177.7305" y2="190.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="168" x2="209" y1="190.7305" y2="190.7305"/><polygon fill="#A80036" points="178,186.7305,168,190.7305,178,194.7305,174,190.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="174" y="157.6777">执行跨链交易</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="174" y="172.9883">将跨链包写入egress中</text><polygon fill="#A80036" points="178,231.3516,168,235.3516,178,239.3516,174,235.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="172" x2="322" y1="235.3516" y2="235.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="184" y="215.2988">同步最新区块头</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="184" y="230.6094">IBCUpdateChainTx</text><polygon fill="#A80036" points="553,260.6621,563,264.6621,553,268.6621,557,264.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="323" x2="559" y1="264.6621" y2="264.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="330" y="259.9199">向ChainB发送ChainA中最新区块信息</text><polygon fill="#A80036" points="178,289.9727,168,293.9727,178,297.9727,174,293.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="172" x2="322" y1="293.9727" y2="293.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="184" y="289.2305">同步egress中的跨链包</text><polygon fill="#A80036" points="553,334.5938,563,338.5938,553,342.5938,557,338.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="323" x2="559" y1="338.5938" y2="338.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="330" y="318.541">向ChainB发送跨链交易包</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="330" y="333.8516">IBCPacketPostTx</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="565" x2="607" y1="398.5254" y2="398.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="607" x2="607" y1="398.5254" y2="411.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="566" x2="607" y1="411.5254" y2="411.5254"/><polygon fill="#A80036" points="576,407.5254,566,411.5254,576,415.5254,572,411.5254" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="572" y="363.1621">校验IBCPacketPostTx中的Merkle proof</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="572" y="378.4727">是否等于ChainA中的区块头，校验完成后</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="375" x="572" y="393.7832">在ChainB中执行跨链交易，并将IBCPacketPostTx放入ingress中</text><!--
@startuml
actor user
participant ChainA
participant Relayer
participant ChainB


user -> ChainA: 发送跨链交易\nIBCPacketCreateTx
ChainA -> ChainA: 执行跨链交易\n将跨链包写入egress中
Relayer -> ChainA: 同步最新区块头\nIBCUpdateChainTx
Relayer -> ChainB: 向ChainB发送ChainA中最新区块信息
Relayer -> ChainA: 同步egress中的跨链包
Relayer -> ChainB:向ChainB发送跨链交易包\nIBCPacketPostTx
ChainB -> ChainB: 校验IBCPacketPostTx中的Merkle proof\n是否等于ChainA中的区块头，校验完成后\n在ChainB中执行跨链交易，并将IBCPacketPostTx放入ingress中
@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.14.4
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>